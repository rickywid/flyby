.row.destination-details
	.col-md-12
		%h1.destination= @destination.name
		= link_to "Edit", edit_destination_path(@destination), class: "btn btn-xs btn-success v-align"
.row
	.col-md-3
		%h2 #{@accomodation.name}
		%h5 #{@accomodation.address}
		%h5 Travel Start: #{@destination.start_date}
		%h5 Travel End: #{@destination.end_date}
		%h5= @accomodation.add_notes
	
	.col-md-9
		- @location_details.each do |location|
			.col-md-3.location-details
				%h2= link_to location.name, destination_location_path(@destination, location)
				%p= location.city
				%p= location.address
				%p= location.date
				%p= location.description

.row
	.col-md-12
		#map

:javascript
	var markers = #{@locations}
	var map;
	function initMap() {
		var bounds = new google.maps.LatLngBounds();
	  	map = new google.maps.Map(document.getElementById('map'), {
	    zoom: 10,
	    center: new google.maps.LatLng(markers[0].latitude, markers[0].longitude),
	  });

		var hotel_marker = new google.maps.Marker({
			position: {lat: #{@accomodation.latitude}, lng: #{@accomodation.longitude}},
			map: map,
			icon: "http://www.pacificonline.com/images/icons/office_building_64px.png",
			title: "#{@accomodation.name}"
		});

		for (var i = 0; i < markers.length; i++) {
			var data = markers[i];
			var myLatlng = new google.maps.LatLng(data.latitude, data.longitude);
			var marker = new google.maps.Marker({
				position: myLatlng,
				map: map,
				title: data.name
			});
			bounds.extend(marker.position);
		};
		map.fitBounds(bounds);	
	};	

%script{:async => "", :defer => "", :src => "https://maps.googleapis.com/maps/api/js?key=AIzaSyBdMDyASdvSs-EL3DUXLggdI9WKcZenQKg&callback=initMap"}
